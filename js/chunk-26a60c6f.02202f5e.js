(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26a60c6f"],{"6ca7":function(t,e,a){},a523:function(t,e,a){"use strict";a("4de4"),a("d3b7"),a("b64b"),a("2ca0"),a("99af"),a("20f6"),a("4b85"),a("498a"),a("a15b");var n=a("2b0e");function r(t){return n["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,a){var n=a.props,r=a.data,s=a.children;r.staticClass="".concat(t," ").concat(r.staticClass||"").trim();var o=r.attrs;if(o){r.attrs={};var i=Object.keys(o).filter((function(t){if("slot"===t)return!1;var e=o[t];return t.startsWith("data-")?(r.attrs[t]=e,!1):e||"string"===typeof e}));i.length&&(r.staticClass+=" ".concat(i.join(" ")))}return n.id&&(r.domProps=r.domProps||{},r.domProps.id=n.id),e(n.tag,r,s)}})}var s=a("d9f7");e["a"]=r("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var a,n=e.props,r=e.data,o=e.children,i=r.attrs;return i&&(r.attrs={},a=Object.keys(i).filter((function(t){if("slot"===t)return!1;var e=i[t];return t.startsWith("data-")?(r.attrs[t]=e,!1):e||"string"===typeof e}))),n.id&&(r.domProps=r.domProps||{},r.domProps.id=n.id),t(n.tag,Object(s["a"])(r,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(a||[])}),o)}})},e382:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{staticClass:"px-0",attrs:{flat:""}},[a("v-toolbar-title",[a("h4",[t._v("Сотрудники")])]),a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:t.openDialog}},[a("v-icon",{attrs:{left:""}},[t._v("fas fa-plus")]),t._v(" Добавить ")],1)],1),a("v-card",[a("v-card-text",[a("v-data-table",{attrs:{items:t.items,headers:t.headers,"items-per-page":t.items.length,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function(e){var n=e.item;return[t.can("admin.users.changeStatus")?a("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"","true-value":10,"false-value":0,loading:n.loading},on:{change:function(e){return t.changeStatus(n)}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"item.status"}}):t._e()]}},{key:"item.name",fn:function(e){var n=e.item;return[n.roles&&n.roles.includes("customer")?a("div"):a("div",[t._v(" "+t._s(n.name)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[t.can("admin.users.destroy")?a("div",{staticClass:"d-flex align-center"},[a("v-btn",{attrs:{color:"error",small:"",icon:""},on:{click:function(e){return t.setDeleteItem(n)}}},[a("v-icon",{attrs:{size:"15"}},[t._v("fas fa-trash-alt")])],1)],1):t._e()]}}])})],1)],1),a("warning-dialog",{on:{apply:t.removeUser},model:{value:t.showWarningModal,callback:function(e){t.showWarningModal=e},expression:"showWarningModal"}}),a("v-dialog",{attrs:{scrollable:"","max-width":"600px"},model:{value:t.roleDialog,callback:function(e){t.roleDialog=e},expression:"roleDialog"}},[a("ValidationObserver",{ref:"roleForm",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.attach.apply(null,arguments)}}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Прикрепить роль")]),a("v-icon",{staticClass:"info_modal_close",on:{click:function(e){t.roleDialog=!1}}},[t._v(" mdi-close ")])],1),a("v-container",{staticClass:"pb-0"},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:"Выбрать все"},model:{value:t.isSelectedAllRoles,callback:function(e){t.isSelectedAllRoles=e},expression:"isSelectedAllRoles"}})],1),a("v-card-text",{staticClass:"mt-0 pt-0"},[a("v-container",{staticClass:"concul_modal_form"},[a("v-row",[[a("v-container",{attrs:{fluid:""}},t._l(t.roles,(function(e,n){return a("div",{key:"role-"+n},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:e,value:e},model:{value:t.selectedRoles,callback:function(e){t.selectedRoles=e},expression:"selectedRoles"}})],1)})),0)]],2)],1)],1),a("v-card-actions",{staticClass:"footer_modal_user"},[a("v-spacer"),a("v-btn",{attrs:{color:"#838EA1",dark:""},on:{click:function(e){t.roleDialog=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{color:"#0076C3",dark:"",type:"submit",loading:t.loading}},[t._v("Сохранить")])],1)],1)],1)],1),a("user-create-update",{ref:"userFormRef",on:{getUserList:t.getUserList}})],1)},r=[],s=(a("d3b7"),a("159b"),a("b0c0"),a("4de4"),a("e8d1")),o=a("9698"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("validation-observer",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var n=e.handleSubmit;return[a("form",{on:{submit:function(e){return e.preventDefault(),n(t.save)}}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.form.id?"Изменить":"Добавить")+" ")]),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"role_name",name:"Роль",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("v-select",{attrs:{"error-messages":n[0],outlined:"",items:t.roles,"item-value":"name","item-text":"name",label:"Роль",dense:""},model:{value:t.form.role_name,callback:function(e){t.$set(t.form,"role_name",e)},expression:"form.role_name"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"name",name:"Имя",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("v-text-field",{attrs:{"error-messages":n[0],outlined:"",label:"Имя",dense:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"last_name",name:"фамилия",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("v-text-field",{attrs:{"error-messages":n[0],outlined:"",label:"Имя",dense:""},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"password",name:"Пароль",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("v-text-field",{attrs:{"error-messages":n[0],outlined:"",label:"Пароль",dense:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"email",name:"Почта",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("v-text-field",{attrs:{"error-messages":n[0],outlined:"",label:"Почта",dense:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12"}},[a("validation-provider",{attrs:{vid:"phone",name:"Телефон",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("v-text-field",{attrs:{"error-messages":n[0],type:"number",outlined:"",label:"Телефон",dense:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})]}}],null,!0)})],1)],1)],1),a("v-card-actions",{staticClass:"pt-0"},[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{type:"submit",color:"success",loading:t.loading}},[t._v("Сохранить")])],1)],1)],1)]}}])})],1)},l=[],c=a("1da1"),u=a("5530"),d=(a("96cf"),a("025e")),f={role_name:null,name:null,last_name:null,email:null,phone:null,password:null},m={name:"UserCreateUpdate",data:function(){return{dialog:!1,form:Object(u["a"])({},f),roles:[],loading:!1}},created:function(){this.getRoles()},methods:{save:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$http.post("users",t.form);case 4:t.dialog=!1,t.$emit("getUserList"),e.next=13;break;case 8:e.prev=8,e.t0=e["catch"](1),t.$store.commit("showErrorMessage",e.t0),a=t.$refs.form,a.setErrors(Object(d["a"])(e.t0));case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})))()},openDialog:function(){this.dialog=!0},getRoles:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("roles");case 3:a=e.sent,n=a.data.data,t.roles=n,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$store.commit("showErrorMessage",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},watch:{dialog:function(t){t||(this.form=Object(u["a"])({},f),this.$refs.form.reset())}}},h=m,v=a("2877"),p=a("6544"),g=a.n(p),b=a("8336"),x=a("b0af"),k=a("99d9"),_=a("62ad"),w=a("169a"),$=a("ce7e"),C=a("0fd9"),S=a("b974"),y=a("2fa4"),V=a("8654"),I=Object(v["a"])(h,i,l,!1,null,"d9a0de4e",null),R=I.exports;g()(I,{VBtn:b["a"],VCard:x["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VCol:_["a"],VDialog:w["a"],VDivider:$["a"],VRow:C["a"],VSelect:S["a"],VSpacer:y["a"],VTextField:V["a"]});var D={components:{UserCreateUpdate:R,FullLoading:o["a"],WarningDialog:s["a"]},data:function(){return{deleteItem:null,showWarningModal:!1,items:[],headers:[{text:"Id#",value:"id"},{text:"Имя",value:"name"},{text:"Почта",value:"email"},{text:"Телефон",value:"phone"},{text:"Статус",value:"status"},{text:"Действия",value:"actions"}],roles:[],selectedRoles:[],roleDialog:!1,id:null,loading:!1}},computed:{isSelectedAllRoles:{get:function(){return this.selectedRoles.length===this.roles.length},set:function(t){this.selectedRoles=t?this.roles:[]}}},methods:{changeStatus:function(t){var e=this;t.loading=!0;var a=0===t.status?0:10;this.$http.post("users/change/".concat(t.id),{status:a}).then((function(a){t.status=a.data.data.status,e.getUserList()})).finally((function(){t.loading=!1}))},setDeleteItem:function(t){this.showWarningModal=!0,this.deleteItem=t},getUserList:function(){var t=this;this.$store.commit("showLoading"),this.$http.get("/users/list").then((function(e){t.items=e.data.data})).catch((function(e){return t.$store.commit("showErrorMessage",e)})).finally((function(){return t.$store.commit("clearLoading")}))},getRoleList:function(){var t=this;this.$store.commit("showLoading"),this.$http.get("/roles/list").then((function(e){e.data.success&&(t.roles=e.data.data)})).catch((function(e){return t.$store.commit("showErrorMessage",e)})).finally((function(){return t.$store.commit("clearLoading")}))},openRoleModal:function(t){var e=this;this.id=t.id,t.roles.forEach((function(t){e.selectedRoles.push(t.name)})),this.roleDialog=!0},attach:function(){var t=this;this.loading=!0,this.$http.put("users/attach-role/"+this.id,{roles:this.selectedRoles}).then((function(e){e.data.success&&t.$store.commit("showSnackbar","Successfully attached")})).catch((function(e){t.$store.commit("showErrorMessage",e)})).finally((function(){t.getUserList(),t.roleDialog=!1,t.loading=!1}))},removeUser:function(){var t=this,e=this.deleteItem.id;e&&(this.$store.commit("showLoading"),this.$http.delete("/users/".concat(e)).then((function(){t.items=t.items.filter((function(t){return t.id!==e})),t.deleteItem=null})).catch((function(e){return t.$store.commit("showErrorMessage",e)})).finally((function(){return t.$store.commit("clearLoading")})))},openDialog:function(){var t=this.$refs.userFormRef;t.openDialog()}},created:function(){this.getUserList(),this.getRoleList()}},O=D,L=a("15fd"),j=(a("25f0"),a("6ca7"),a("ec29"),a("9d26")),E=a("c37a"),U=a("fe09"),M=["title"],T=U["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(u["a"])(Object(u["a"])({},E["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,Object(L["a"])(t,M));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(j["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(u["a"])(Object(u["a"])({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}}),A=a("a523"),W=a("8fea"),q=a("132d"),P=a("b73d"),F=a("71d9"),B=a("2a7f"),J=Object(v["a"])(O,n,r,!1,null,null,null);e["default"]=J.exports;g()(J,{VBtn:b["a"],VCard:x["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VCheckbox:T,VContainer:A["a"],VDataTable:W["a"],VDialog:w["a"],VIcon:q["a"],VRow:C["a"],VSpacer:y["a"],VSwitch:P["a"],VToolbar:F["a"],VToolbarTitle:B["a"]})}}]);
//# sourceMappingURL=chunk-26a60c6f.02202f5e.js.map