(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-294ae44c"],{b7aa:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("banner-form")},n=[],s=e("e359"),o={components:{bannerForm:s["a"]}},i=o,l=e("2877"),u=Object(l["a"])(i,r,n,!1,null,null,null);a["default"]=u.exports},e359:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.ready?e("ValidationObserver",{ref:"obs",scopedSlots:t._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[e("form",{on:{submit:function(a){return a.preventDefault(),r(t.save)}}},[e("v-card-title",{staticClass:"px-0"},[e("h4",[t._v(t._s(t.title))]),e("v-spacer"),e("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",loading:t.loading,type:"submit"}},[t._v(" Сохранить ")])],1),e("v-card",[e("v-card-text",[e("v-row",[e("v-col",{attrs:{md:"6"}},[e("validation-provider",{attrs:{name:"url"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-text-field",{attrs:{"error-messages":r[0],outlined:"",dense:"",clearable:"",label:"Url"},model:{value:t.formData.url,callback:function(a){t.$set(t.formData,"url",a)},expression:"formData.url"}})]}}],null,!0)})],1),e("v-col",{attrs:{md:"6"}},[e("validation-provider",{attrs:{name:"status"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-autocomplete",{attrs:{"error-messages":r[0],"item-text":"text",outlined:"",dense:"",clearable:"",label:"Status","item-value":"id",items:t.$store.state.status},model:{value:t.formData.status,callback:function(a){t.$set(t.formData,"status",a)},expression:"formData.status"}})]}}],null,!0)})],1)],1)],1)],1),e("v-row",[e("v-col",{staticClass:"flex-grow-0 py-0"},[e("v-card-title",{staticClass:"mt-4 px-1 pb-1"},[t._v("Фото")]),e("validation-provider",{attrs:{name:"file"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-uploader",{attrs:{"error-message":r[0]},model:{value:t.formData.file,callback:function(a){t.$set(t.formData,"file",a)},expression:"formData.file"}})]}}],null,!0)})],1)],1)],1)]}}],null,!1,4237792206)}):t._e()},n=[],s=(e("d3b7"),e("3ca3"),e("ddb0"),e("025e")),o={data:function(){return{formData:{is_main:0,status:10,url:"",file:{}},loading:!1,ready:!1}},computed:{title:function(){return this.$route.meta.title},isUpdate:function(){return this.$route.params.id}},methods:{getData:function(){var t=this;return new Promise((function(a){t.$http.get("banners/".concat(t.$route.params.id)).then((function(a){var e={};for(var r in a.data.data.file={},a.data.data.is_main=!0===a.data.data.is_main?1:0,a.data.data.image_url&&(a.data.data.file.url=a.data.data.image_url),a.data.data)t.formData.hasOwnProperty(r)&&(e[r]=a.data.data[r]);t.formData=e})).finally((function(){return a()}))}))},save:function(){this.isUpdate?this.update():this.create()},prepareData:function(){var t=new FormData;for(var a in this.formData)"file"===a?this.formData[a].file?t.append(a,this.formData[a].file):null===this.formData[a].file&&null===this.formData[a].url&&t.append(a,null):t.append(a,this.formData[a]);return t},create:function(){var t=this,a=this.prepareData();this.$http.post("banners",a).then((function(){t.$router.push({name:"banner-index"}),t.$store.commit("showSnackbar","Saved successfully")})).catch((function(a){var e=t.$refs.obs;e.setErrors(Object(s["a"])(a)),t.$store.commit("showErrorMessage",a)}))},update:function(){var t=this,a=this.prepareData();a.append("_method","put"),this.$http.post("banners/".concat(this.$route.params.id),a).then((function(){t.$router.push({name:"banner-index"}),t.$store.commit("showSnackbar","Saved successfully")})).catch((function(a){var e=t.$refs.obs;e.setErrors(Object(s["a"])(a)),t.$store.commit("showErrorMessage",a)}))},init:function(){var t=this;this.$store.commit("showLoading");var a=[];this.isUpdate&&a.push(this.getData()),Promise.all(a).then((function(){t.$store.commit("clearLoading"),t.ready=!0}))}},created:function(){this.init()}},i=o,l=e("2877"),u=e("6544"),c=e.n(u),d=e("c6a6"),f=e("8336"),m=e("b0af"),p=e("99d9"),v=e("62ad"),h=e("0fd9"),b=e("2fa4"),D=e("8654"),$=Object(l["a"])(i,r,n,!1,null,null,null);a["a"]=$.exports;c()($,{VAutocomplete:d["a"],VBtn:f["a"],VCard:m["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:v["a"],VRow:h["a"],VSpacer:b["a"],VTextField:D["a"]})}}]);
//# sourceMappingURL=chunk-294ae44c.302825b3.js.map