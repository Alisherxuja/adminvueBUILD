(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21752151"],{4820:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card-title",{staticClass:"px-0"},[a("div",{staticClass:"d-flex justify-space-between",staticStyle:{width:"100%"}},[a("h4",[t._v(t._s(t.title))]),a("div",{staticClass:"d-flex"},[a("v-card",{staticStyle:{"margin-right":"10px"}},[a("div",[a("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{dense:"","hide-details":"",label:"От",outlined:"","prepend-inner-icon":"fas fa-calendar-alt",readonly:""},scopedSlots:t._u([t.filters.date_from?{key:"append",fn:function(){return[a("v-btn",{staticClass:"mt-1",attrs:{icon:"","x-small":""},on:{click:function(e){t.filters.date_from=null}}},[a("v-icon",{attrs:{small:""}},[t._v(" fas fa-times")])],1)]},proxy:!0}:null],null,!0),model:{value:t.filters.date_from,callback:function(e){t.$set(t.filters,"date_from",e)},expression:"filters.date_from"}},"v-text-field",i,!1),s))]}}]),model:{value:t.fromDateModal,callback:function(e){t.fromDateModal=e},expression:"fromDateModal"}},[a("v-date-picker",{attrs:{"no-title":"",width:"235"},on:{input:function(e){t.fromDateModal=!1}},model:{value:t.filters.date_from,callback:function(e){t.$set(t.filters,"date_from",e)},expression:"filters.date_from"}})],1)],1)]),a("v-card",{staticStyle:{"margin-right":"10px"}},[a("div",[a("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{dense:"","hide-details":"",label:"До",outlined:"","prepend-inner-icon":"fas fa-calendar-alt",readonly:""},scopedSlots:t._u([t.filters.date_to?{key:"append",fn:function(){return[a("v-btn",{staticClass:"mt-1",attrs:{icon:"","x-small":""},on:{click:function(e){t.filters.date_to=null}}},[a("v-icon",{attrs:{small:""}},[t._v(" fas fa-times")])],1)]},proxy:!0}:null],null,!0),model:{value:t.filters.date_to,callback:function(e){t.$set(t.filters,"date_to",e)},expression:"filters.date_to"}},"v-text-field",i,!1),s))]}}]),model:{value:t.toDateModal,callback:function(e){t.toDateModal=e},expression:"toDateModal"}},[a("v-date-picker",{attrs:{"no-title":"",width:"235",max:(new Date).toISOString()},on:{input:function(e){t.toDateModal=!1}},model:{value:t.filters.date_to,callback:function(e){t.$set(t.filters,"date_to",e)},expression:"filters.date_to"}})],1)],1)]),a("v-btn",{staticStyle:{height:"40px"},attrs:{color:"primary"},on:{click:t.filterHandler}},[t._v(" Филтер ")])],1)])]),a("v-card",[a("v-card-text",[a("v-data-table",{attrs:{headers:t.headers,items:t.items,"items-per-page":t.options.perPage,"hide-default-footer":""},scopedSlots:t._u([{key:"body.prepend",fn:function(){return[a("tr",[a("td",[a("v-text-field",{attrs:{clearable:"",dense:"","hide-details":"",outlined:""},model:{value:t.filters.id,callback:function(e){t.$set(t.filters,"id",e)},expression:"filters.id"}})],1),a("td",[a("v-text-field",{attrs:{clearable:"",dense:"","hide-details":"",outlined:"",type:"text"},model:{value:t.filters.username,callback:function(e){t.$set(t.filters,"username",e)},expression:"filters.username"}})],1),a("td",[a("v-text-field",{attrs:{clearable:"",dense:"","hide-details":"",outlined:""},model:{value:t.filters.amount,callback:function(e){t.$set(t.filters,"amount",e)},expression:"filters.amount"}})],1),a("td",[a("v-text-field",{attrs:{clearable:"",dense:"","hide-details":"",outlined:""},model:{value:t.filters.address,callback:function(e){t.$set(t.filters,"address",e)},expression:"filters.address"}})],1),a("td"),a("td",[a("v-text-field",{attrs:{clearable:"",dense:"","hide-details":"",outlined:""},model:{value:t.filters.phone,callback:function(e){t.$set(t.filters,"phone",e)},expression:"filters.phone"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.$store.state.orderStatus,clearable:"",dense:"","hide-details":"",outlined:""},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1),a("td",[a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"mx-2 mt-1",attrs:{color:"error",height:"30","x-small":""},on:{click:t.clearFilterHandler}},[a("v-icon",{attrs:{small:""}},[t._v("fas fa-times")])],1),a("v-btn",{staticClass:"mt-1",attrs:{color:"primary",height:"30","x-small":""},on:{click:t.filterHandler}},[a("v-icon",{attrs:{small:""}},[t._v("fas fa-search")])],1)],1)])])]},proxy:!0},{key:"item.total_price",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("money")(a.total_price))+" ")]}},{key:"item.status",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{color:t.getColor(s.status),label:"",outlined:"",small:""}},[t._v(" "+t._s(s.status_name)+" ")])]}},{key:"item.username",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.name)+" ")]}},{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{attrs:{color:"#0aa89e",small:""},on:{click:function(e){return t.$router.push({name:"order-item-id",params:{id:s.id}})}}},[a("v-icon",{attrs:{color:"#fff"}},[t._v("fas fa-eye")])],1)]}}])})],1)],1),a("v-pagination",{directives:[{name:"show",rawName:"v-show",value:t.options.lastPage>1,expression:"options.lastPage > 1"}],attrs:{length:t.options.lastPage,"total-visible":12},on:{input:t.changePage},model:{value:t.options.page,callback:function(e){t.$set(t.options,"page",e)},expression:"options.page"}})],1)},i=[],l=a("5530"),r=(a("ac1f"),a("5319"),a("d3b7"),a("159b"),a("b64b"),a("7db0"),{name:"OrdersList",props:{delivery:{type:Boolean,required:!1,default:!1},cancel:{type:Boolean,required:!1,default:!1}},data:function(){return{fromDateModal:!1,toDateModal:!1,items:[],dateModal:!1,filters:{id:null,username:null,total_price:null,address:null,date:null,phone:null,status:null,action:null},headers:[{text:"Id",value:"id",filterable:{}},{text:"Username",value:"username",filterable:{}},{text:"Сумма",value:"total_price",filterable:{}},{text:"Адрес",value:"address",filterable:{}},{text:"Дата",value:"date",width:200,filterable:{}},{text:"Телефон",value:"phone",filterable:{}},{text:"Статус",value:"status",filterable:{value:null}},{text:"Действия",value:"action",sortable:!1}],options:{page:1,perPage:15,lastPage:0}}},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.delivery?this.getDeliveryList(t):this.cancel?this.getCancelList(t):this.getOrdersList(t)},changePage:function(t){var e=this.$route.query.page;+e!==t&&(this.getOrdersList(),this.$router.replace({query:Object(l["a"])(Object(l["a"])({},this.$route.query),{},{page:t})}))},getOrdersList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.options,s=a.page,i=a.perPage;e=Object(l["a"])(Object(l["a"])({},e),{},{page:s,per_page:i}),this.$store.commit("showLoading"),this.$http.get("orders",{params:e}).then((function(e){var a=e.data.links.last_page;t.items=e.data.data,t.options.lastPage=a})).catch((function(e){t.$store.commit("showErrorMessage",e)})).finally((function(){return t.$store.commit("clearLoading")}))},getDeliveryList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$store.commit("showLoading"),this.$http.get("orders/delivered",{params:e}).then((function(e){t.items=e.data.data,t.pagesCount=e.data.links.total})).catch((function(e){t.$store.commit("showErrorMessage",e)})).finally((function(){return t.$store.commit("clearLoading")}))},getCancelList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$store.commit("showLoading"),this.$http.get("orders/cancelled",{params:e}).then((function(e){t.items=e.data.data,t.pagesCount=e.data.links.total})).catch((function(e){t.$store.commit("showErrorMessage",e)})).finally((function(){return t.$store.commit("clearLoading")}))},filterHandler:function(){var t=this;this.options.page=1,this.getOrders(this.filters);var e={};Object.keys(this.filters).forEach((function(a){t.filters[a]&&(e[a]=t.filters[a])})),this.$router.push({query:e})},clearFilterHandler:function(){this.filters={id:null,name:null,amount:null,address:null,date_from:null,date_to:null,phone:"",status:null},this.getOrders(this.filters),this.$router.push({query:{}})},getColor:function(t){var e=this.$store.state.statusColors.find((function(e){return e.status===t}));return e?e.color:""}},computed:{title:function(){return this.$route.meta.title}},mounted:function(){var t=this.$route.query.page;t&&(this.options.page=+t),this.getOrders()}}),n=r,o=a("2877"),d=a("6544"),c=a.n(d),u=a("c6a6"),f=a("8336"),m=a("b0af"),p=a("99d9"),v=a("cc20"),h=a("8fea"),g=a("2e4b"),b=a("132d"),x=a("e449"),_=a("891e"),y=a("8654"),k=Object(o["a"])(n,s,i,!1,null,"67e025ed",null);e["a"]=k.exports;c()(k,{VAutocomplete:u["a"],VBtn:f["a"],VCard:m["a"],VCardText:p["b"],VCardTitle:p["c"],VChip:v["a"],VDataTable:h["a"],VDatePicker:g["a"],VIcon:b["a"],VMenu:x["a"],VPagination:_["a"],VTextField:y["a"]})},"634a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("orders-list")},i=[],l=a("4820"),r={components:{OrdersList:l["a"]},data:function(){return{}}},n=r,o=a("2877"),d=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-21752151.5106dc30.js.map