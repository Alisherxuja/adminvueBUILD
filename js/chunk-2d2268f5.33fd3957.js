(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2268f5"],{e8d0:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("v-card-title",{staticClass:"px-0"},[t._v(" Роли "),a("v-spacer")],1),a("v-card",[a("v-card-text",[a("v-data-table",{attrs:{headers:t.header,items:t.roles,loading:t.isLoading,"disable-pagination":"","hide-default-footer":"","disable-sort":""},scopedSlots:t._u([{key:"item.actions",fn:function(e){var i=e.item;return[a("table-actions",{attrs:{actions:t.actions,item:i,"can-mixin-delete":"admin.roles.delete","can-mixin-edit":"admin.roles.update"},on:{deleteItem:function(e){return t.deleteItem(i)},editItem:function(e){return t.editItem(i)}}})]}}])})],1)],1),t.params.pageCount>1?a("div",{staticClass:"text-center pt-2"},[a("v-pagination",{attrs:{length:t.params.pageCount,color:"red","total-visible":"7"},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}})],1):t._e(),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)])},n=[],s=(a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex align-center ma-n1"},[t.actions.view&&t.can(t.canMixinView)?a("div",{staticClass:"pa-1"},[a("v-btn",{staticClass:"min-width-auto",attrs:{small:"",color:"primary"},on:{click:function(e){return t.$emit("viewItem")}}},[a("v-icon",{attrs:{"x-small":""}},[t._v("fas fa-eye")])],1)],1):t._e(),t.actions.edit&&t.can(t.canMixinEdit)?a("div",{staticClass:"pa-1"},[a("v-btn",{staticClass:"min-width-auto",attrs:{small:"",color:"warning"},on:{click:function(e){return t.$emit("editItem")}}},[a("v-icon",{attrs:{"x-small":""}},[t._v("fas fa-pencil-alt")])],1)],1):t._e(),t.actions.delete&&t.can(t.canMixinDelete)?a("div",{staticClass:"pa-1"},[a("v-btn",{staticClass:"min-width-auto",attrs:{small:"",color:"error"},on:{click:function(e){t.dialog=!0}}},[a("v-icon",{attrs:{"x-small":""}},[t._v(" fas fa-trash ")])],1)],1):t._e(),t.actions.delete?a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("delete-dialog",{on:{close:function(e){t.dialog=!1},deleteItem:t.deleteItem}})],1):t._e()],1)}),o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Хотите удалить?")]),a("v-card-text",[t._v("Вы уверены, что хотите удалить этот элемент?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.$emit("close")}}},[t._v("Отмена")]),a("v-btn",{attrs:{color:"success darken-1",loading:t.loading},on:{click:function(e){return t.$emit("deleteItem")}}},[t._v("Удалить")])],1)],1)},c=[],r={name:"DeleteDialog",props:{loading:Boolean}},d=r,u=a("2877"),p=a("6544"),m=a.n(p),g=a("8336"),v=a("b0af"),f=a("99d9"),h=a("2fa4"),x=Object(u["a"])(d,l,c,!1,null,"28cb2a3c",null),b=x.exports;m()(x,{VBtn:g["a"],VCard:v["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VSpacer:h["a"]});var C={name:"TableActions",components:{DeleteDialog:b},props:{item:{type:Object,required:!0,default:function(){return[]}},actions:{type:Object,required:!1,default:function(){return{view:!0,edit:!0,delete:!0}}},canMixinEdit:{type:String},canMixinDelete:{type:String},canMixinView:{type:String}},data:function(){return{dialog:!1}},methods:{deleteItem:function(){this.dialog=!1,this.$emit("deleteItem")}}},_=C,w=a("169a"),k=a("132d"),V=Object(u["a"])(_,s,o,!1,null,"0118c25a",null),I=V.exports;m()(V,{VBtn:g["a"],VDialog:w["a"],VIcon:k["a"]});var D={name:"index",components:{TableActions:I},props:["page"],data:function(){return{roles:[],isLoading:!1,params:{page:1,count:10,pageCount:0,totalCount:0},header:[{text:"ID",value:"id"},{text:"Название",value:"name"},{text:"Имя охранника",value:"guard_name"}],actions:{view:!1,edit:!1,delete:!1},dialog:!1,selectedItem:{},locationsList:[]}},watch:{"params.page":function(t){this.$router.push({name:"roles",params:{page:t}}).catch((function(){}))},page:"getDevelopers"},created:function(){this.getDevelopers()},methods:{getDevelopers:function(){var t=this;this.isLoading=!0,this.$http.get("roles",{params:{page:this.params.page}}).then((function(e){t.roles=e.data.data,e.data.links&&(t.params={page:e.data.links.current_page,pageCount:e.data.links.last_page,totalCount:e.data.links.total})})).catch((function(t){})).finally((function(){t.isLoading=!1}))},editItem:function(t){this.$router.push({name:"users-role-update",params:{id:t.id}})},refresh:function(){this.selectedItem={},this.dialog=!1,this.getDevelopers()},deleteItem:function(t){var e=this;this.isLoading=!0,this.$http.delete("roles/"+t.id).then((function(t){t.data.success&&e.getDevelopers()})).catch((function(t){})).finally((function(){e.isLoading=!1}))}}},$=D,y=a("8fea"),L=a("891e"),T=Object(u["a"])($,i,n,!1,null,"21e13167",null);e["default"]=T.exports;m()(T,{VCard:v["a"],VCardText:f["b"],VCardTitle:f["c"],VDataTable:y["a"],VDialog:w["a"],VPagination:L["a"],VSpacer:h["a"]})}}]);
//# sourceMappingURL=chunk-2d2268f5.33fd3957.js.map