(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2fcccce"],{"996f":function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.ready?e("ValidationObserver",{ref:"obs",scopedSlots:t._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[e("form",{on:{submit:function(a){return a.preventDefault(),r(t.save)}}},[e("v-card-title",{staticClass:"px-0"},[e("h4",[t._v(t._s(t.title))]),e("v-spacer"),e("v-switch",{staticClass:"ma-2",staticStyle:{"margin-top":"22px !important"},attrs:{"true-value":10,"false-value":0,color:"primary",label:"Active"},model:{value:t.formData.status,callback:function(a){t.$set(t.formData,"status",a)},expression:"formData.status"}}),e("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",loading:t.loading,type:"submit"}},[t._v(" Сохранить ")])],1),e("v-card",[e("v-card-text",[e("v-row",[e("v-col",{attrs:{md:"4"}},[e("validation-provider",{attrs:{name:"name_ru"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-text-field",{attrs:{"error-messages":r[0],"item-text":"name",outlined:"",dense:"",clearable:"",label:"Название ru"},model:{value:t.formData.name_ru,callback:function(a){t.$set(t.formData,"name_ru",a)},expression:"formData.name_ru"}})]}}],null,!0)})],1),e("v-col",{attrs:{md:"4"}},[e("validation-provider",{attrs:{name:"name_uz"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-text-field",{attrs:{"error-messages":r[0],"item-text":"name",outlined:"",dense:"",clearable:"",label:"Название uz"},model:{value:t.formData.name_uz,callback:function(a){t.$set(t.formData,"name_uz",a)},expression:"formData.name_uz"}})]}}],null,!0)})],1),e("v-col",{attrs:{md:"4"}},[e("validation-provider",{attrs:{name:"parent_id"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-autocomplete",{attrs:{"error-messages":r[0],"item-text":"name_ru",outlined:"",dense:"",clearable:"",label:"Родитель",items:t.categories,"item-value":"id"},model:{value:t.formData.parent_id,callback:function(a){t.$set(t.formData,"parent_id",a)},expression:"formData.parent_id"}})]}}],null,!0)})],1),t.accessToAddBrands?e("v-col",{attrs:{md:"4"}},[e("validation-provider",{attrs:{name:"brands"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-autocomplete",{attrs:{"error-messages":r[0],"item-text":"name",outlined:"",dense:"",clearable:"",label:"Brands","item-value":"id",items:t.brands,multiple:""},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[e("v-list-item",{attrs:{ripple:""},on:{click:function(a){return t.toggle(!t.likesAllBrand)}}},[e("v-list-item-action",[e("v-icon",{attrs:{color:t.formData.brands.length>0?"indigo darken-4":""}},[t._v(" "+t._s(t.icon)+" ")])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(" Выбрать все ")])],1)],1)]},proxy:!0},{key:"selection",fn:function(a){var r=a.item,n=a.index;return[n<3?[e("v-chip",[t._v(t._s(r.name))])]:t._e(),3===n?[e("v-chip",[t._v("+"+t._s(t.formData.brands.length-3))])]:t._e()]}}],null,!0),model:{value:t.formData.brands,callback:function(a){t.$set(t.formData,"brands",a)},expression:"formData.brands"}})]}}],null,!0)})],1):t._e(),e("v-col",{attrs:{md:"4"}},[e("validation-provider",{attrs:{name:"file"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("v-uploader",{attrs:{"error-message":r[0],"label-text":"Image"},model:{value:t.formData.file,callback:function(a){t.$set(t.formData,"file",a)},expression:"formData.file"}})]}}],null,!0)})],1)],1)],1)],1)],1)]}}],null,!1,1629024105)}):t._e()},n=[],s=(e("d3b7"),e("d81d"),e("159b"),e("3ca3"),e("ddb0"),e("4de4"),e("025e")),i={data:function(){return{formData:{name_ru:"",name_uz:"",parent_id:"",file:{},brands:[],is_popular:0,status:10},loading:!1,ready:!1,categories:[],brands:[]}},watch:{accessToAddBrands:function(t){t||(this.formData.brands=[])}},computed:{title:function(){return this.$route.meta.title},isUpdate:function(){return this.$route.params.id},accessToAddBrands:function(){return this.formData.parent_id},likesAllBrand:function(){return this.formData.brands.length===this.brands.length},likesSomeFruit:function(){return this.formData.brands.length>0&&!this.likesAllBrand},icon:function(){return this.likesAllBrand?"fas fa-times":this.likesSomeFruit?"fas fa-minus":"fas fa-check"}},methods:{toggle:function(t){var a=this;this.$nextTick((function(){if(t){for(var e=[],r=0;r<a.brands.length;r++)e[r]=a.brands[r].id;a.formData.brands=e}else a.formData.brands=[]}))},getData:function(){var t=this;return new Promise((function(a){t.$http.get("categories/".concat(t.$route.params.id)).then((function(a){a.data.data.file={},a.data.data.brands=a.data.data.category_brands.map((function(t){return t.brand_id})),a.data.data.image_url&&(a.data.data.file.url=a.data.data.image_url),null===a.data.data.parent_id&&(a.data.data.parent_id="");var e={};for(var r in a.data.data)t.formData.hasOwnProperty(r)&&(e[r]=a.data.data[r]);t.formData=e})).finally((function(){return a()}))}))},getCategories:function(){var t=this;return new Promise((function(a){t.$http.get("categories/parent-list").then((function(a){t.categories=a.data.data})).catch((function(a){return t.$store.commit("showErrorMessage",a)})).finally((function(){return a()}))}))},getBrands:function(){var t=this;return new Promise((function(a){t.$http.get("brands/list").then((function(a){t.brands=a.data.data})).catch((function(a){return t.$store.commit("showErrorMessage",a)})).finally((function(){return a()}))}))},save:function(){this.isUpdate?this.update():this.create()},prepareData:function(){var t=this,a=new FormData,e=function(e){"file"===e?t.formData[e].file&&a.append(e,t.formData[e].file):"brands"===e?t.formData[e].forEach((function(t){a.append(e+"[]",t)})):a.append(e,t.formData[e])};for(var r in this.formData)e(r);return a},create:function(){var t=this,a=this.prepareData();this.$http.post("categories",a).then((function(){t.$router.push({name:"categories-index"}),t.$store.commit("showSnackbar","Saved successfully")})).catch((function(a){var e=t.$refs.obs;e.setErrors(Object(s["a"])(a)),t.$store.commit("showErrorMessage",a)}))},update:function(){var t=this,a=this.prepareData();a.append("_method","put"),this.$http.post("categories/".concat(this.$route.params.id),a).then((function(){t.$router.push({name:"categories-index"}),t.$store.commit("showSnackbar","Saved successfully")})).catch((function(a){var e=t.$refs.obs;e.setErrors(Object(s["a"])(a)),t.$store.commit("showErrorMessage",a)}))},init:function(){var t=this;this.$store.commit("showLoading");var a=[this.getCategories(),this.getBrands()];this.isUpdate&&a.push(this.getData()),Promise.all(a).then((function(){t.$store.commit("clearLoading"),t.ready=!0}))},filterParents:function(){var t=this;this.filteredCategories=this.categories.filter((function(a){return a.type===t.formData.type}))}},created:function(){this.init()}},o=i,l=e("2877"),c=e("6544"),u=e.n(c),d=e("c6a6"),f=e("8336"),m=e("b0af"),p=e("99d9"),h=e("cc20"),v=e("62ad"),b=e("132d"),g=e("da13"),_=e("1800"),D=e("5d23"),k=e("0fd9"),$=e("2fa4"),y=e("b73d"),x=e("8654"),w=Object(l["a"])(o,r,n,!1,null,null,null);a["a"]=w.exports;u()(w,{VAutocomplete:d["a"],VBtn:f["a"],VCard:m["a"],VCardText:p["b"],VCardTitle:p["c"],VChip:h["a"],VCol:v["a"],VIcon:b["a"],VListItem:g["a"],VListItemAction:_["a"],VListItemContent:D["a"],VListItemTitle:D["c"],VRow:k["a"],VSpacer:$["a"],VSwitch:y["a"],VTextField:x["a"]})},fb26:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("category-form")},n=[],s=e("996f"),i={components:{categoryForm:s["a"]}},o=i,l=e("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-c2fcccce.ae15639e.js.map